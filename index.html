<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>My Page</title>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1b1b1b">

  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
</head>
<body>

<h1>マイQRコード</h1>
<div id="qrcode"></div>

<script type="module">
  import { auth } from "./firebase.js";
  import { registerUser } from "./app.js";

  auth.onAuthStateChanged(user => {
    if (user) {
      registerUser(user.uid);
      new QRCode(document.getElementById("qrcode"), user.uid);
    }
  });

  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js");
  }
</script>

</body>
</html>
